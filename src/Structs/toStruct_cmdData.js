/* eslint-disable no-unused-expressions */
const { Struct } = require('struct');
const net = require('net');
const { formatServerData } = require('./toStruct_Data');
const { createCmdStruct } = require('./struct_cmdData');
// 88888888 04CC0120 2000 000000000000 3442000034420000344200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000099999999
// 88888888 04cc0120 2000 000000000000 00420000c4420000204100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000099999999
const cmdStruct = createCmdStruct();

function updateStructCommands(data) {
  const {
    MdlManChr, MdlManInj, MdlManCdr, MdlManCar,
  } = data;

  MdlManChr && (cmdStruct.fields.CmdMemVal[0].MdlManChr = MdlManChr);
  MdlManInj && (cmdStruct.fields.CmdMemVal[0].MdlManInj = MdlManInj);
  MdlManCdr && (cmdStruct.fields.CmdMemVal[0].MdlManCdr = MdlManCdr);
  MdlManCar && (cmdStruct.fields.CmdMemVal[0].MdlManCar = MdlManCar);
}

function sendData() {
  const buf = cmdStruct.buffer();
  return buf;
}

module.exports = { updateStructCommands, sendData };
